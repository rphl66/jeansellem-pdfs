<script>
(async function () {
  const pdfUrl = "https://rphl66.github.io/jeansellem-pdfs/1971-sandro-adriani.pdf";
  const pdf = await pdfjsLib.getDocument(pdfUrl).promise;

  const images = [];

  for (let i = 1; i <= pdf.numPages; i++) {
    const page = await pdf.getPage(i);
    const viewport = page.getViewport({ scale: 1.5 });
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = viewport.width;
    canvas.height = viewport.height;
    await page.render({ canvasContext: ctx, viewport }).promise;

    const dataUrl = canvas.toDataURL("image/png");
    images.push(dataUrl);

    // ðŸŸ¢ Debug : insÃ©rer les images directement dans la page
    const img = document.createElement("img");
    img.src = dataUrl;
    img.style.width = "200px";
    document.body.appendChild(img);
  }

  console.log("Nombre de pages gÃ©nÃ©rÃ©es :", images.length);

  // StPageFlip (dÃ©sactivÃ© pour test)
  /*
  const flipbook = new St.PageFlip(document.getElementById("flipbook"), {
    width: 600,
    height: 800,
    size: "stretch",
    showCover: false,
    maxShadowOpacity: 0.5,
  });

  flipbook.loadFromImages(images);
  */
})();
</script>
